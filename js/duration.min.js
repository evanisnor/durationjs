"use strict";!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():e.Duration=r()}(this,(function(){var e=function(r){if(this.seconds=0,"undefined"!=r&&null!=r&&""!=r||(r=0),"number"==typeof r&&r<0)throw new Error(e.prototype.Error.NegativeValue);if("number"==typeof r)this.seconds=r;else{var t=!1;for(var o in e.prototype.DurationFormat){var s=e.prototype.DurationFormat[o].pattern,n=e.prototype.DurationFormat[o].parser;if(s.test(r)){t=!0,this.seconds=n(this.seconds,r.match(s));break}}if(!t)throw new Error(e.prototype.Error.UnexpectedFormat)}if(isNaN(this.seconds))throw new Error(e.prototype.Error.Overflow)};return e.prototype.Calendar={Seconds:{per:{Minute:60,Hour:3600,Day:86400,Week:604800,Month:2629739.52,Year:31556908.8}},Minutes:{per:{Hour:60,Day:1440,Week:10080,Month:1440*30.4368,Year:525948.48}},Hours:{per:{Day:24,Week:168,Month:730.4832,Year:8765.808}},Days:{per:{Week:7,Month:30.4368,Year:365.242}},Weeks:{per:{Month:4.34812,Year:52.1775}},Months:{per:{Year:12}}},e.prototype.Error={},e.prototype.Error.UnexpectedFormat="Unexpected duration format. Refer to ISO 8601.",e.prototype.Error.NegativeValue="Cannot create a negative duration.",e.prototype.Error.Overflow="Cannot represent a duration that large. Float overflow.",e.prototype.Parser={},e.prototype.Parser.Extended=function(r,t){for(var o=e.prototype.Calendar,s=1;s<t.length;s++){var n=parseInt(t[s],10);if(1===s)r+=n*o.Seconds.per.Year;else if(2===s){if(n>=12)throw new Error(e.prototype.Error.UnexpectedFormat);r+=n*o.Seconds.per.Month}else if(3===s){if(n>31)throw new Error(e.prototype.Error.UnexpectedFormat);r+=n*o.Seconds.per.Day}else if(4===s){if(n>=24)throw new Error(e.prototype.Error.UnexpectedFormat);r+=n*o.Seconds.per.Hour}else if(5===s){if(n>=60)throw new Error(e.prototype.Error.UnexpectedFormat);r+=n*o.Seconds.per.Minute}else if(6===s){if(n>=60)throw new Error(e.prototype.Error.UnexpectedFormat);r+=n}}return r},e.prototype.Parser.Basic=e.prototype.Parser.Extended,e.prototype.Parser.StandardWeeks=function(r,t){for(var o=e.prototype.Calendar,s=1;s<t.length;s++){var n=t[s];if(/\d+W/.test(n))r+=parseInt(n.replace("W",""),10)*o.Seconds.per.Week;else if(/\d+[A-Z]/.test(n))throw new Error(e.prototype.Error.UnexpectedFormat)}return r},e.prototype.Parser.Standard=function(r,t){var o=e.prototype.Calendar;if("P"===t[0]||"PT"===t[0])throw new Error(e.prototype.Error.UnexpectedFormat);for(var s=!1,n=1;n<t.length;n++){var a=t[n];if(/T/.test(a))s=!0;else if(/\d+Y/.test(a))r+=parseFloat(a.replace("Y",""),10)*o.Seconds.per.Year;else if(/\d+M/.test(a)&&!s)r+=parseFloat(a.replace("M",""),10)*o.Seconds.per.Month;else if(/\d+D/.test(a))r+=parseFloat(a.replace("D",""),10)*o.Seconds.per.Day;else if(/\d+H/.test(a))r+=parseFloat(a.replace("H",""),10)*o.Seconds.per.Hour;else if(/\d+M/.test(a)&&s)r+=parseFloat(a.replace("M",""),10)*o.Seconds.per.Minute;else if(/\d+S/.test(a))r+=parseFloat(a.replace("S",""),10);else if(/\d+[A-Z]/.test(a))throw new Error(e.prototype.Error.UnexpectedFormat)}return r},e.prototype.DurationFormat={Extended:{pattern:/^P(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/,parser:e.prototype.Parser.Extended},Basic:{pattern:/^P(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})$/,parser:e.prototype.Parser.Basic},StandardWeeks:{pattern:/^P(\d+W)$/,parser:e.prototype.Parser.StandardWeeks},Standard:{pattern:/^P(\d+(\.\d+)*Y)*(\d+(\.\d+)*M)*(\d+(\.\d+)*D)*(?:(T)(\d+(\.\d+)*H)*(\d+(\.\d+)*M)*(\d+(\.\d+)*S)*)?$/,parser:e.prototype.Parser.Standard}},e.prototype.padInt=function(e,r){for(var t=e+"",o="",s=0,n=0;n<r;n++)o+=r-n<=t.length?t[s++]:"0";return o},e.prototype.inSeconds=function(){return this.seconds},e.prototype.inMinutes=function(){return this.seconds/this.Calendar.Seconds.per.Minute},e.prototype.inHours=function(){return this.seconds/this.Calendar.Seconds.per.Hour},e.prototype.inDays=function(){return this.seconds/this.Calendar.Seconds.per.Day},e.prototype.inWeeks=function(){return this.seconds/this.Calendar.Seconds.per.Week},e.prototype.inMonths=function(){return this.seconds/this.Calendar.Seconds.per.Month},e.prototype.inYears=function(){return this.seconds/this.Calendar.Seconds.per.Year},e.prototype.add=function(r){return new e(this.seconds+r.seconds)},e.prototype.subtract=function(r){return new e(this.seconds-r.seconds)},e.prototype.value=function(){var e={};return e.years=Math.floor(this.seconds/this.Calendar.Seconds.per.Year),e.months=Math.floor((this.seconds-e.years*this.Calendar.Seconds.per.Year)/this.Calendar.Seconds.per.Month),e.days=Math.floor((this.seconds-e.years*this.Calendar.Seconds.per.Year-e.months*this.Calendar.Seconds.per.Month)/this.Calendar.Seconds.per.Day),e.hours=Math.floor((this.seconds-e.years*this.Calendar.Seconds.per.Year-e.months*this.Calendar.Seconds.per.Month-e.days*this.Calendar.Seconds.per.Day)/this.Calendar.Seconds.per.Hour),e.minutes=Math.floor((this.seconds-e.years*this.Calendar.Seconds.per.Year-e.months*this.Calendar.Seconds.per.Month-e.days*this.Calendar.Seconds.per.Day-e.hours*this.Calendar.Seconds.per.Hour)/this.Calendar.Seconds.per.Minute),e.seconds=Math.round(this.seconds-e.years*this.Calendar.Seconds.per.Year-e.months*this.Calendar.Seconds.per.Month-e.days*this.Calendar.Seconds.per.Day-e.hours*this.Calendar.Seconds.per.Hour-e.minutes*this.Calendar.Seconds.per.Minute),e},e.prototype.ago=function(){return 0==this.seconds?"just now":this.seconds<this.Calendar.Seconds.per.Minute?this.seconds+" second"+(this.seconds>1?"s":"")+" ago":this.seconds<this.Calendar.Seconds.per.Hour?Math.floor(this.inMinutes())+" minute"+(this.inMinutes()>1?"s":"")+" ago":this.seconds<this.Calendar.Seconds.per.Day?Math.floor(this.inHours())+" hour"+(this.inHours()>1?"s":"")+" ago":this.seconds<this.Calendar.Seconds.per.Week?Math.floor(this.inDays())+" day"+(this.inDays()>1?"s":"")+" ago":this.seconds<this.Calendar.Seconds.per.Month?Math.floor(this.inWeeks())+" week"+(this.inWeeks()>1?"s":"")+" ago":this.seconds<this.Calendar.Seconds.per.Year?Math.floor(this.inMonths())+" month"+(this.inMonths()>1?"s":"")+" ago":Math.floor(this.inYears())+" year"+(this.inYears()>1?"s":"")+" ago"},e.prototype.asClock=function(){var e=this.value();return 0==e.hours?e.minutes+":"+(e.seconds<10?"0"+e.seconds:e.seconds):e.hours+":"+(e.minutes<10?"0"+e.minutes:e.minutes)+":"+(e.seconds<10?"0"+e.seconds:e.seconds)},e.prototype.asStandard=function(){var e=this.value();if(0==this.seconds)return"PT0S";var r=e.hours>0||e.minutes>0||e.seconds>0;return"P"+(e.years>0?e.years+"Y":"")+(e.months>0?e.months+"M":"")+(e.days>0?e.days+"D":"")+(r?"T":"")+(e.hours>0?e.hours+"H":"")+(e.minutes>0?e.minutes+"M":"")+(e.seconds>0?e.seconds+"S":"")},e.prototype.asStandardWeeks=function(){return"P"+Math.floor(this.inWeeks())+"W"},e.prototype.asExtended=function(){var e=this.value();return"P"+this.padInt(e.years,4)+"-"+this.padInt(e.months,2)+"-"+this.padInt(e.days,2)+"T"+this.padInt(e.hours,2)+":"+this.padInt(e.minutes,2)+":"+this.padInt(e.seconds,2)},e.prototype.asBasic=function(){var e=this.value();return"P"+this.padInt(e.years,4)+this.padInt(e.months,2)+this.padInt(e.days,2)+"T"+this.padInt(e.hours,2)+this.padInt(e.minutes,2)+this.padInt(e.seconds,2)},e}));
